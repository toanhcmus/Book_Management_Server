<%- include('header') -%>

<div class = "container-fluid">
        <div style = "position: absolute;top: 50%; left: 10%; width: 75%; bottom: 100%; text-align: center; font-size: 18px; background: #6994dd;"> 
        <% if (checkCustomer === 2) { %>
            <form id="form-checkCustomer" class="row g-3" action="/customer/check" method="POST" style="border-style: double;" >  
                <h4>Nhập thông tin khách hàng</h4>
                <div class="col-md-6" id="inputCustomerName">
                    <label for="name" class="form-label" style = "color: black; font-weight: bold;">Tên khách hàng</label>
                    <input type="text" class="form-control" id="customerName" name="customerName">
                </div>
                <div class="col-md-6" id="inputCustomerPhone">
                    <label for="customerPhone" class="form-label" style = "color: black; font-weight: bold;">Số điện thoại
                    </label>
                    <input type="tel" class="form-control" id="customerPhone" name="customerPhone">
                </div>
                <!-- <div class="col-md-6" id="inputCustomerEmail" style="display: none;">
                    <label for="sdt" class="form-label" style = "color: black; font-weight: bold;">Email
                    </label>
                    <input type="email" class="form-control" id="customerEmail" name="customerEmail">
                </div>
                <div class="col-md-6" id="inputCustomerAddress" style="display: none;">
                    <label for="sdt" class="form-label" style = "color: black; font-weight: bold;">Địa chỉ
                    </label>
                    <input type="text" class="form-control" id="customerAddress" name="customerAddress">
                </div> -->
                <div class="col-12" style = "margin-bottom: 10px;">
                    <button type="submit" class="btn btn-dark">Kiểm tra</button>
                    <span>&nbsp;</span>
                </div>
            </form>
        <% } else {%>
        </div>
        <% if (checkCustomer === 1) { %>
            <div class="row g-6">
                <div class="col-md-6" id="inputCustomerName">
                    <label for="name" class="form-label" style = "color: black; font-weight: bold;">Tên khách hàng</label>
                    <input type="text" class="form-control" id="customerName" name="customerName" value="<%= customer.TenKH %>" disabled>
                </div>
                <div class="col-md-6" id="inputCustomerPhone">
                    <label for="customerPhone" class="form-label" style = "color: black; font-weight: bold;">Số điện thoại
                    </label>
                    <input type="tel" class="form-control" id="customerPhone" name="customerPhone" value="<%= customer.SDT %>" disabled>
                </div>
                <div class="col-md-6" id="inputCustomerEmail">
                    <label for="customerEmail" class="form-label" style = "color: black; font-weight: bold;">Email
                    </label>
                    <input type="email" class="form-control" id="customerEmail" name="customerEmail" value="<%= customer.Email %>" disabled>
                </div>
                <div class="col-md-6" id="inputCustomerAddress">
                    <label for="customerAddress" class="form-label" style = "color: black; font-weight: bold;">Địa chỉ
                    </label>
                    <input type="text" class="form-control" id="customerAddress" name="customerAddress" value="<%= customer.DiaChi %>" disabled>
                </div>
                <div class="col-md-6" id="inputCustomerDebt">
                    <label for="customerDebt" class="form-label" style = "color: black; font-weight: bold;">Nợ
                    </label>
                    <input type="text" class="form-control" id="customerDebt" name="customerDebt" value="<%= customer.No %>" disabled>
                </div>
            </div>
            <% } %>  
        
            <% if (checkCustomer === 0) { %>
                <div class="row g-6">
                    <div class="col-md-6" id="inputCustomerName">
                        <label for="name" class="form-label" style = "color: black; font-weight: bold;">Tên khách hàng</label>
                        <input type="text" class="form-control" id="customerName" name="customerName" value="<%= customer.name %>" disabled>
                    </div>
                    <div class="col-md-6" id="inputCustomerPhone">
                        <label for="customerPhone" class="form-label" style = "color: black; font-weight: bold;">Số điện thoại
                        </label>
                        <input type="tel" class="form-control" id="customerPhone" name="customerPhone" value="<%= customer.phone %>" disabled>
                    </div>
                    <div class="col-md-6" id="inputCustomerEmail">
                        <label for="customerEmail" class="form-label" style = "color: black; font-weight: bold;">Email
                        </label>
                        <input type="email" class="form-control" id="customerEmail" name="customerEmail">
                    </div>
                    <div class="col-md-6" id="inputCustomerAddress">
                        <label for="customerAddress" class="form-label" style = "color: black; font-weight: bold;">Địa chỉ
                        </label>
                        <input type="text" class="form-control" id="customerAddress" name="customerAddress">
                    </div>
                </div>
            <% } %>
            
            <div class="card card-import">
                <div class="card-header text-bg-primary">
                  Danh sách SÁCH mua
                </div>
                <div class="card-body">
                    <table class="table table-import">
                        <thead class="table-dark">
                          <tr>
                            <th scope="col">Tên sách</th>
                            <th scope="col">Tác giả</th>
                            <th scope="col">Thể loại</th>
                            <th scope="col">Lượng tồn</th>
                            <th scope="col">Đơn giá</th>
                            <th scope="col">Chọn</th>
                            <th scope="col">Số lượng</th>
                          </tr>
                        </thead>
                        <tbody id="bookTableBody">
                            <% allBooks.forEach(book => { %>
                                <tr id="<%= book.MaSach %>">
                                    <td class="bookname"><%= book.TenSach %></td>
                                    <td class="author"><%= book.TacGia %></td>
                                    <td class="type"><%= book.TheLoai %></td>
                                    <td class="count"><%= book.SoLuong %></td>
                                    <td class="price"><%= book.Gia %></td>
                                    <td class="check">
                                        <input type="checkbox" id="check<%= book.MaSach %>"/>
                                    </td>
                                    <td class="SL">
                                        <input type="number" id="num<%= book.MaSach %>" 
                                            id="num<%= book.MaSach %>" min="0" max="<%= book.SoLuong %>" step="1"
                                            value="0" />
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
        
                    <p id="error-table" style="color: red;"></p>

                </div>
            </div>
        <% } %>
        
</div>

<%- include('footer') -%>